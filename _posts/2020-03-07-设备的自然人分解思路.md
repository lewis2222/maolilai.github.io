---
layout: post
title:  "设备的自然人分解"
date:   2020-03-07 12:16:01
categories: 机器学习
---

在移动互联网时代，玩家大部分都是手游玩家，如何基于设备信息去确定哪些设备是归属同一个人是一个难点，
因为跨终端玩游戏很常见，比如代练等，不能通过单纯的账号关系得到自然人。
但是我们也只有这样的信息。

### 一、小图拆解
方法1:暴力方式，采用Spark GraphX计算框架中的ConnectedComponents算法方法，暴力对数据集合进行拆解
得到 簇ID+设备ID 以及 设备ID + QQ/wx
根据上面的信息：

得到 设备ID1、设备ID2  共同的QQ数量、QQ号码

```
select   设备ID1,设备ID2, WM_CONCAT(QQ, ';', 'asc', irank) AS QQlist
，其他机型信息 ---- 品牌、机芯是否一致，登陆的省份、城市信息 ，游戏偏好
from（
select   设备ID1,设备ID1,QQ  from
(
select  簇ID,a.设备ID1, QQ from  结果表
) a join
(
select  簇ID,a.设备ID1, QQ from  结果表
) b  on a.簇ID = b.簇ID  and  a.qq = b.qq
）  
```

根据以上 信息得到
设备ID1、设备ID2 之间 每个特征的权重，判断是否要进行分裂，如何进一步分解成多个自然人（簇群）

方法2
不用cc图计算
直接用表和表之间进行关联  至少有50亿条边，能跑得动吗？  应该可以的，lz有足够的资源跑。
 设备ID + QQ/wx  
 得到设备ID1、设备ID2 、QQ号码

 方法3: 使用simhash + minhash 对 边的属性特征进行降维，拆成小图，然后进行关联分析。
 类似方法1（和相关高手沟通，觉得这种损伤很大）
---团队内可以尝试。

 ### 二、根据特征，确定是否进一步拆解
 目标 生产概率网络图

根据特征生成概率，进一步截断 ，直到拆解的颗粒度很细或者紧密度很高。

如果图很复杂就要考虑剪纸

业界：全量用户的概率网络是一个巨大的连通图。自然人是由（Connected components）表示的，
所以我们需要依据概率将图中的某一些边删除，从而将连通图变成由很多连通分量组成的非连通图。

无论是哪种方法都会出现怪物社区 ，一个社区几亿个节点，很棘手 。

### 如何验证数据
可以使用画像等数据进行验证。
方法需要一起探讨。


----- 针对设备的自然人分析还是有难度的，比账号更加困难，账号还有自己账号的属性信息，设备这种很难搞到这些信息。
